<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
  <head>
    <title>Update instructions</title>
        <link rel="stylesheet" type="text/css" media="screen" href="../general/css/style.css" />
  </head>  
  <body>
        <h1>Update instructions</h1>
        
        <font style="color:red">Caution: This information is out of date</font><br><br>

        First rule: Always make a backup before updating an existing installation.
        
        There are several cases for updating:
        <ol>
        <li> Upgrading from a very old major version (1.1x, 1.2x, 1.3x)</li>
        <li> Upgrading from the last major versions (1.4x and 1.5x)</li>
        <li> Updating the sub version (1.5x to 1.5x)</li>
        </ol>
        
        <h2>Upgrading from 1.3x or lower</h2>
        
        <p>There have been many changes to the internal structure of NagVis and the configuration values.<br />
        The recommended way for upgrading to the latest NagVis version is to set up the new version as new
    installation and migrate your maps/icons/configurations/... manually.</p>
        
        <p>You should take a look at the following places:</p>
        
        <ul>
        <li> Maps (etc/maps)<br />
        Just copy all map configuration files</li>
        <li> Background-Images (nagvis/images/maps)<br />
        Just copy all map background images</li>
        <li> Iconsets (nagvis/images/iconsets)<br />
        Just copy everything which is not named "std_*"</li>
        <li> Shapes (nagvis/images/shapes)<br />
        Just copy everything</li>
        <li> Templates (nagvis/templates/hover and nagvis/templates/header)<br />
        Just copy all your custom templates. <font style="color:#ff0000">Be aware:</font> Don't replace the default templates.<br />Maybe you need to update your pre 1.3 templates to 1.3 version. For more information take a look at the <a href="http://www.nagvis.org/download/templates" target="_blank">template download</a> page.</li>
        <li> Template-Images (nagvis/images/templates/hover and nagvis/images/templates/header)<br />
        Just copy everything</li>
        <li> Main configuration (etc/nagvis.inc.php)<br />
        You should <font style="color:#ff0000">not</font> copy that file. The best way is to  copy the sample configuration of the new NagVis version to etc/nagvis.inc.php and merge the settings of your old installation manually to that file</li>
        </ul>
        
        <h2>Updating from NagVis 1.4x</h2>
        
        <p>From NagVis 1.4x to NagVis 1.5x we changed a lot in the directory structure.
    But in the newest NagVis version there is an installer script included for installing
    NagVis. This script can also upgrade NagVis 1.4x versions and newer to the latest NagVis release.<br />
    So it is recommended to use this script (<code>install.sh</code>) distributed with the
    newest NagVis version to upgrade your installation.</p>
   
   <p>The permission configuration changed with NagVis 1.5. So the installer removes the
   allowed_for_config and allowed_users parameters from the map configuration files. The
   permissions are not automatically re-added to the new permission database. The removed
   permissions are stored as dump in the nagvis/etc/auth-backup file. With this information
   you can re-apply the permissions to your maps using the new role based permission system.</p>

   <p>It is possible to perform the 1.4x to 1.5x (or newer) update manually too but it has not been
   tested and documented by anyone. So if you like to update your installation manually
   you will need to do some research.
   Basically it should be the same as described above (copying custom files to the new
   locations and merging your settings into nagvis.ini.php. <font color="#ff0000">Don&apos;t</font> copy this file!).</p>

   <p>Once you made some experience in updating NagVis 1.4x to 1.5 or 1.6 manually please let us know
   so that we can extend this documentation.</p>

    </body>
</html>
